import{g as j,j as e}from"./index-D3ZYKOMr.js";import{r as n,X as b,M as v,o as g,e as w}from"./icons-DbTSyZBX.js";import"./react-DbHEDQBy.js";function N(){const[l,d]=n.useState([]),[i,o]=n.useState(!1),[c,a]=n.useState(null);return{messages:l,loading:i,error:c,sendMessage:async m=>{var x,t;if(!m.trim())return;o(!0),a(null);const h={role:"user",content:m};d(r=>[...r,h]);try{const{data:r}=await j.post("/assistant",{message:m});let s=r.reply;typeof s=="string"&&(s=s.replace(/^"+|"+$/g,"").trim());const f={role:"assistant",content:s};d(p=>[...p,f])}catch(r){console.error("Chatbot error:",r),a(((t=(x=r.response)==null?void 0:x.data)==null?void 0:t.message)||"Something went wrong with the assistant.")}finally{o(!1)}}}}function S(){const[l,d]=n.useState(!1),[i,o]=n.useState(""),{messages:c,loading:a,error:u,sendMessage:m}=N(),h=n.useRef(null);n.useEffect(()=>{var s;(s=h.current)==null||s.scrollIntoView({behavior:"smooth"})},[c,a]);const x=async()=>{const s=i.trim();a||s.length<10||s.length>50||(await m(s),o(""))},t=i.trim().length,r=t>=10&&t<=50;return e.jsxs("div",{className:"fixed bottom-4 right-4 z-50 sm:bottom-6 sm:right-6",children:[e.jsxs("div",{className:`absolute bottom-20 right-0 w-96 h-[500px] lg:h-[600px] 
        bg-white dark:bg-slate-950 rounded-2xl shadow-2xl flex flex-col overflow-hidden
        border border-slate-200 dark:border-slate-800 transition-all duration-300 ease-in-out origin-bottom-right
        ${l?"scale-100 opacity-100 visible":"scale-95 opacity-0 invisible"}`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-md",children:e.jsx("img",{src:"/logo/ava.png",alt:"Ava Avatar",className:"w-full rounded-full"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-base",children:"Ava"}),e.jsx("p",{className:"text-emerald-100 text-xs font-medium",children:"Always here to help"})]})]}),e.jsx("button",{onClick:()=>d(!1),className:"text-white hover:bg-emerald-500/30 rounded-lg p-2 transition-all hover:scale-110 active:scale-95","aria-label":"Close chat",children:e.jsx(b,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-4 bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-950 scroll-smooth",children:[c.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-950 rounded-full flex items-center justify-center mx-auto",children:e.jsx(v,{className:"w-8 h-8 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-900 dark:text-white font-semibold",children:"Welcome to Ava"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Start a conversation below"})]})]})}):c.map((s,f)=>e.jsx("div",{className:`flex transition-all duration-300 ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] px-4 py-3 rounded-2xl text-sm leading-relaxed shadow-sm 
                    transition-transform duration-200 ease-out animation-in fade-in slide-in-from-bottom-2
                    ${s.role==="user"?"bg-emerald-600 text-white rounded-br-none font-medium":"bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-slate-50 border border-slate-200 dark:border-slate-700 rounded-bl-none"}`,children:s.content})},f)),a&&e.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 px-4 py-3 rounded-2xl rounded-bl-none flex gap-2 items-center",children:[e.jsx(g,{className:"w-4 h-4 text-emerald-600 animate-spin"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Ava is typing..."})]})}),e.jsx("div",{ref:h})]}),u&&e.jsx("div",{className:"px-5 py-3 bg-red-50 dark:bg-red-950/30 border-t border-red-200 dark:border-red-900",children:e.jsxs("p",{className:"text-red-600 dark:text-red-400 text-xs font-medium flex items-center gap-2",children:[e.jsx("span",{children:"⚠️"})," ",u]})}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-950 space-y-3",children:[e.jsxs("div",{className:"flex gap-2.5 items-center",children:[e.jsx("input",{type:"text",value:i,onChange:s=>o(s.target.value),onKeyDown:s=>s.key==="Enter"&&!s.shiftKey&&x(),placeholder:"Type a message...",className:`flex-1 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full \r
              px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:text-white \r
              placeholder-slate-500 dark:placeholder-slate-400 disabled:opacity-50 transition-all`,disabled:a}),e.jsx("button",{onClick:x,disabled:a||!r,className:`bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 text-white rounded-full p-3 \r
              transition-all active:scale-95 flex items-center justify-center flex-shrink-0 shadow-md hover:shadow-lg disabled:cursor-not-allowed`,"aria-label":"Send message",children:a?e.jsx(g,{className:"w-5 h-5 animate-spin"}):e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{children:[t<10&&t>0&&e.jsx("span",{className:"text-amber-500",children:"Minimum 10 characters required"}),t>50&&e.jsx("span",{className:"text-red-500",children:"Maximum 50 characters allowed"}),t===0&&"Shift + Enter for new line"]}),e.jsxs("span",{className:t>50?"text-red-500 font-semibold":t<10&&t>0?"text-amber-500":"",children:[t,"/50"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[!l&&e.jsx("div",{className:`mb-2 px-3 py-1.5 bg-white dark:bg-slate-900 text-emerald-700 dark:text-emerald-400 \r
            text-xs font-medium rounded-full shadow-md border border-slate-200 dark:border-slate-700 \r
            animate-fade-in cursor-pointer select-none transition-all hover:scale-105`,onClick:()=>d(!0),children:"Need help? Ask Ava."}),e.jsx("button",{onClick:()=>d(!l),"aria-label":"Toggle Chat",className:`w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-lg flex items-center justify-center 
          transition-all duration-300 hover:scale-110 active:scale-95 overflow-hidden cursor-pointer 
          ${l?"bg-slate-700 hover:bg-slate-800 text-white shadow-xl":"bg-gradient-to-br from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white hover:shadow-xl"}`,children:l?e.jsx(b,{className:"w-6 h-6"}):e.jsx("img",{src:"/logo/ava.png",alt:"Ava Avatar",className:"w-full"})})]})]})}export{S as default};
