import{g as x,c as b,j as s,V as g}from"./index-D3ZYKOMr.js";import{r as o,S as N}from"./icons-DbTSyZBX.js";import"./react-DbHEDQBy.js";const C=()=>{const[i,h]=o.useState([]),[y,m]=o.useState(!1),[l,d]=o.useState([]),[p,u]=o.useState([]),f=(e,a)=>{u(n=>{const t=[...n];return t[e]=a,t})},j=async(e,a)=>{d(t=>{const r=[...t];return r[e]=!0,r});const n={feedback_id:a,response:p[e]};try{await x.post("/feedbacks-response",n),u(t=>{const r=[...t];return r[e]="",r}),g.success("Feedback submitted successfully"),c()}catch(t){console.error(t),g.error("Something went wrong. Please try again.")}finally{d(t=>{const r=[...t];return r[e]=!1,r})}},c=o.useCallback(async()=>{var e;try{m(!0);const a=await x.get("/feedbacks");h(a.data)}catch(a){a instanceof b&&console.error((e=a.response)==null?void 0:e.data.message)}finally{m(!1)}},[]);return o.useEffect(()=>{c()},[c]),y?"Loading...":s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-primary mb-3",children:"All Feedbacks"}),i.length>0&&i.map((e,a)=>{var n;return s.jsxs("div",{className:"shadow-sm rounded-2xl  p-5 flex-col space-y-3",children:[s.jsx("div",{className:"mb-3 flex items-center gap-3",children:s.jsxs("div",{children:[s.jsxs("p",{children:[(n=e.user)==null?void 0:n.name," â€¢ ",s.jsxs("span",{className:"text-sm",children:[e.rate," "]})]}),s.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(t=>s.jsx(N,{className:"w-6 h-6",fill:t<=Number(e.rate)?"yellow":"none",strokeWidth:1.5,stroke:"currentColor"},t))}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})}),s.jsx("p",{className:"text-sm text-gray-700",children:e.comment}),e.images&&e.images.length>0&&s.jsx("div",{className:"flex gap-3 mt-3",children:e.images.map((t,r)=>s.jsx("div",{className:"w-[6.25rem] aspect-square bg-primary rounded-xl flex  overflow-hidden justify-center items-center relative",children:s.jsx("img",{src:`https://genevieve-dynamistic-jeanine.ngrok-free.dev/storage/uploads/images/${t.image}`,alt:""})},r))}),e.response?s.jsxs("div",{className:"mt-5",children:[s.jsx("p",{className:"text-sm",children:"Your response:"}),s.jsx("p",{className:"text-sm text-gray-700",children:e.response.response})]}):s.jsxs("div",{className:"flex mt-5",children:[s.jsx("input",{type:"text",value:p[a]||"",onChange:t=>f(a,t.target.value),placeholder:"Type your response here...",className:`flex-1 px-3 py-2 rounded-lg border border-gray-300 \r
               focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary`}),s.jsx("button",{type:"button",onClick:()=>j(a,e.id),disabled:l[a],className:`ml-3 px-4 py-2 rounded-lg text-white transition 
    ${l[a]?"bg-gray-400 cursor-not-allowed":"bg-primary hover:bg-primary-dark"}`,children:l[a]?"Submitting...":"Submit"})]})]},a)})]})};export{C as default};
