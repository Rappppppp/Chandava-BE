import{g as m,c as f,j as e,V as C}from"./index-D3ZYKOMr.js";import{T as N}from"./Table-DMeoVDss.js";import{r as a}from"./icons-DbTSyZBX.js";import{M as q}from"./Modal-C_lINF_8.js";import{D as v}from"./DefaultLoader-BRIWHAbz.js";import"./react-DbHEDQBy.js";import"./Title-BuIfxpma.js";/* empty css                       */const E=()=>{const[g,c]=a.useState(!1),[h,x]=a.useState([]),r=a.useCallback(async()=>{var t;try{c(!0);const s=await m.get("/change-schedule");x(s.data)}catch(s){s instanceof f&&console.error((t=s.response)==null?void 0:t.data.message)}finally{c(!1)}},[]);a.useEffect(()=>{r()},[r]);const b=[{label:"Requester Name",key:"user_full_name"},{label:"Booking ID",key:"booking_id"},{label:"Check-In",key:"check_in"},{label:"Check-Out",key:"check_out"},{label:"Status",key:"status"},{label:"Action",key:"id",render:(t,s)=>s.status==="pending"?e.jsx("button",{onClick:()=>S(s.id),className:"text-sm underline underline-offset-2 text-blue-500 cursor-pointer",children:"View"}):e.jsx("p",{className:"text-sm  text-gray-600",children:"No action required"})}],[k,o]=a.useState(!1),[y,j]=a.useState(null),[n,i]=a.useState(!1),[l,d]=a.useState(!1),S=t=>{j(t),o(!0)},u=async t=>{var s;try{t==="approved"?i(!0):d(!0),await m.post("/change-schedule/change-status",{request_id:y,status:t}),r(),C.success("Status changed successfully"),o(!1)}catch(p){p instanceof f&&console.error((s=p.response)==null?void 0:s.data.message)}finally{i(!1),d(!1)}};return g?e.jsx(v,{}):e.jsxs(e.Fragment,{children:[e.jsx(N,{columns:b,data:h,tableTitle:"All Requests"}),e.jsxs(q,{isOpen:k,setIsOpen:o,className:"max-w-2xl min-w-lg",children:[e.jsx("p",{className:"text-xl font-semibold",children:"Change Status"}),e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("button",{disabled:n||l,onClick:()=>u("approved"),className:"px-4 py-2 text-white bg-primary rounded hover:bg-primary-dark",children:n?"Loading...":"Approve"}),e.jsx("button",{disabled:n||l,onClick:()=>u("rejected"),className:"px-4 py-2 text-white bg-red-500 rounded hover:bg-primary-dark",children:l?"Loading...":"Reject"})]})]})]})};export{E as default};
