import{g as d,c as v,j as t,I as m}from"./index-D3ZYKOMr.js";import{r as a}from"./icons-DbTSyZBX.js";import{T as I}from"./Table-DMeoVDss.js";import{M as u}from"./Modal-C_lINF_8.js";import{u as O,a as L}from"./useAccommodationData-CzsLUOge.js";import{D as R}from"./DefaultLoader-BRIWHAbz.js";import"./react-DbHEDQBy.js";import"./Title-BuIfxpma.js";import"./Select-BSdvxTLj.js";import"./FileInput-BqOq6VSn.js";import"./useInput-syuInLTh.js";/* empty css                       */const K=()=>{const{roomTypes:p,inclusions:x}=O(),[f,h]=a.useState([]),[g,i]=a.useState(!1),[o,c]=a.useState(!1),[y,n]=a.useState(!1),[_,b]=a.useState(null),[j,r]=a.useState(!1),[N,D]=a.useState(null),[k,T]=a.useState(null),A=e=>{D(e.id);const s={room_name:e.room_name,accommodation_type_id:e.accommodation_type.id,description:e.description,day_night_tour_price:e.day_night_tour_price,overnight_price:e.overnight_price,notes:e.notes,inclusion_ids:e.room_inclusions.map(C=>String(C.id))};T(s),r(!0)},E=e=>{b(e),n(!0)},S=async()=>{try{c(!0),await d.patch(`/delete-room/${_}`),l(),n(!1)}catch(e){console.error(e)}finally{c(!1)}},M=[{label:"Room Name",key:"room_name"},{label:"Occupied",key:"is_already_check_in",render:(e,s)=>s.is_already_check_in?"Yes":"No"},{label:"Action",key:"id",render:(e,s)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>A(s),className:"cursor-pointer",children:t.jsx(m,{name:"Pencil",className:"text-blue-500 w-5 h-5"})}),t.jsx("button",{onClick:()=>E(s.id),className:"cursor-pointer",children:t.jsx(m,{name:"Trash",className:"text-red-500 w-5 h-5"})})]})}],l=a.useCallback(async()=>{var e;try{i(!0);const s=await d.get("/rooms?deleted_at[eq]=0");h(s.data.data)}catch(s){s instanceof v&&console.error((e=s.response)==null?void 0:e.data.message)}finally{i(!1)}},[]);return a.useEffect(()=>{l()},[l]),g?t.jsx(R,{}):t.jsxs(t.Fragment,{children:[t.jsx(I,{columns:M,data:f,tableTitle:"All Accommodations"}),t.jsxs(u,{isOpen:y,setIsOpen:n,className:"max-w-2xl min-w-lg",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Are you sure you want to delete this?"}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This action cannot be undone."}),t.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100",disabled:o,children:"Cancel"}),t.jsx("button",{onClick:S,disabled:o,className:`px-4 py-2 rounded-lg text-white ${o?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:o?"Deleting...":"Delete"})]})]}),t.jsx(u,{isOpen:j,setIsOpen:r,className:"max-w-2xl min-w-lg",children:t.jsx(L,{inclusions:x,roomTypes:p,idToEdit:N,defaultValues:k,action:"edit",refetch:l,onClose:()=>r(!1)})})]})};export{K as default};
