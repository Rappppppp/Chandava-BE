import{j as G,I as Re,V as K,g as Ve}from"./index-D3ZYKOMr.js";import{r as be}from"./icons-DbTSyZBX.js";import{g as Ze}from"./react-DbHEDQBy.js";var re={exports:{}},Oe;function Qe(){return Oe||(Oe=1,function(s){var o=function(n){var l=Object.prototype,i=l.hasOwnProperty,d=Object.defineProperty||function(r,e,t){r[e]=t.value},m,R=typeof Symbol=="function"?Symbol:{},N=R.iterator||"@@iterator",D=R.asyncIterator||"@@asyncIterator",M=R.toStringTag||"@@toStringTag";function E(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{E({},"")}catch{E=function(e,t,u){return e[t]=u}}function j(r,e,t,u){var a=e&&e.prototype instanceof v?e:v,p=Object.create(a.prototype),O=new x(u||[]);return d(p,"_invoke",{value:X(r,t,O)}),p}n.wrap=j;function S(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(u){return{type:"throw",arg:u}}}var L="suspendedStart",g="suspendedYield",y="executing",A="completed",h={};function v(){}function b(){}function I(){}var W={};E(W,N,function(){return this});var z=Object.getPrototypeOf,B=z&&z(z(V([])));B&&B!==l&&i.call(B,N)&&(W=B);var U=I.prototype=v.prototype=Object.create(W);b.prototype=I,d(U,"constructor",{value:I,configurable:!0}),d(I,"constructor",{value:b,configurable:!0}),b.displayName=E(I,M,"GeneratorFunction");function H(r){["next","throw","return"].forEach(function(e){E(r,e,function(t){return this._invoke(e,t)})})}n.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===b||(e.displayName||e.name)==="GeneratorFunction":!1},n.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,I):(r.__proto__=I,E(r,M,"GeneratorFunction")),r.prototype=Object.create(U),r},n.awrap=function(r){return{__await:r}};function Y(r,e){function t(p,O,k,_){var T=S(r[p],r,O);if(T.type==="throw")_(T.arg);else{var c=T.arg,f=c.value;return f&&typeof f=="object"&&i.call(f,"__await")?e.resolve(f.__await).then(function(w){t("next",w,k,_)},function(w){t("throw",w,k,_)}):e.resolve(f).then(function(w){c.value=w,k(c)},function(w){return t("throw",w,k,_)})}}var u;function a(p,O){function k(){return new e(function(_,T){t(p,O,_,T)})}return u=u?u.then(k,k):k()}d(this,"_invoke",{value:a})}H(Y.prototype),E(Y.prototype,D,function(){return this}),n.AsyncIterator=Y,n.async=function(r,e,t,u,a){a===void 0&&(a=Promise);var p=new Y(j(r,e,t,u),a);return n.isGeneratorFunction(e)?p:p.next().then(function(O){return O.done?O.value:p.next()})};function X(r,e,t){var u=L;return function(p,O){if(u===y)throw new Error("Generator is already running");if(u===A){if(p==="throw")throw O;return Q()}for(t.method=p,t.arg=O;;){var k=t.delegate;if(k){var _=$(k,t);if(_){if(_===h)continue;return _}}if(t.method==="next")t.sent=t._sent=t.arg;else if(t.method==="throw"){if(u===L)throw u=A,t.arg;t.dispatchException(t.arg)}else t.method==="return"&&t.abrupt("return",t.arg);u=y;var T=S(r,e,t);if(T.type==="normal"){if(u=t.done?A:g,T.arg===h)continue;return{value:T.arg,done:t.done}}else T.type==="throw"&&(u=A,t.method="throw",t.arg=T.arg)}}}function $(r,e){var t=e.method,u=r.iterator[t];if(u===m)return e.delegate=null,t==="throw"&&r.iterator.return&&(e.method="return",e.arg=m,$(r,e),e.method==="throw")||t!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),h;var a=S(u,r.iterator,e.arg);if(a.type==="throw")return e.method="throw",e.arg=a.arg,e.delegate=null,h;var p=a.arg;if(!p)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h;if(p.done)e[r.resultName]=p.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=m);else return p;return e.delegate=null,h}H(U),E(U,M,"Generator"),E(U,N,function(){return this}),E(U,"toString",function(){return"[object Generator]"});function q(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function J(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function x(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(q,this),this.reset(!0)}n.keys=function(r){var e=Object(r),t=[];for(var u in e)t.push(u);return t.reverse(),function a(){for(;t.length;){var p=t.pop();if(p in e)return a.value=p,a.done=!1,a}return a.done=!0,a}};function V(r){if(r){var e=r[N];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var t=-1,u=function a(){for(;++t<r.length;)if(i.call(r,t))return a.value=r[t],a.done=!1,a;return a.value=m,a.done=!0,a};return u.next=u}}return{next:Q}}n.values=V;function Q(){return{value:m,done:!0}}return x.prototype={constructor:x,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(J),!r)for(var e in this)e.charAt(0)==="t"&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function t(_,T){return p.type="throw",p.arg=r,e.next=_,T&&(e.method="next",e.arg=m),!!T}for(var u=this.tryEntries.length-1;u>=0;--u){var a=this.tryEntries[u],p=a.completion;if(a.tryLoc==="root")return t("end");if(a.tryLoc<=this.prev){var O=i.call(a,"catchLoc"),k=i.call(a,"finallyLoc");if(O&&k){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(O){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else if(k){if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var u=this.tryEntries[t];if(u.tryLoc<=this.prev&&i.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var a=u;break}}a&&(r==="break"||r==="continue")&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var p=a?a.completion:{};return p.type=r,p.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(p)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),h},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),J(t),h}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var u=t.completion;if(u.type==="throw"){var a=u.arg;J(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,t){return this.delegate={iterator:V(r),resultName:e,nextLoc:t},this.method==="next"&&(this.arg=m),h}},n}(s.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}(re)),re.exports}var te,ke;function Se(){return ke||(ke=1,te=(s,o)=>`${s}-${o}-${Math.random().toString(16).slice(3,8)}`),te}var ne,Te;function Ke(){if(Te)return ne;Te=1;const s=Se();let o=0;return ne=({id:n,action:l,payload:i={}})=>{let d=n;return typeof d>"u"&&(d=s("Job",o),o+=1),{id:d,action:l,payload:i}},ne}var Z={},Ae;function Ee(){if(Ae)return Z;Ae=1;let s=!1;return Z.logging=s,Z.setLogging=o=>{s=o},Z.log=(...o)=>s?console.log.apply(this,o):null,Z}var oe,Ie;function Xe(){if(Ie)return oe;Ie=1;const s=Ke(),{log:o}=Ee(),n=Se();let l=0;return oe=()=>{const i=n("Scheduler",l),d={},m={};let R=[];l+=1;const N=()=>R.length,D=()=>Object.keys(d).length,M=()=>{if(R.length!==0){const g=Object.keys(d);for(let y=0;y<g.length;y+=1)if(typeof m[g[y]]>"u"){R[0](d[g[y]]);break}}},E=(g,y)=>new Promise((A,h)=>{const v=s({action:g,payload:y});R.push(async b=>{R.shift(),m[b.id]=v;try{A(await b[g].apply(this,[...y,v.id]))}catch(I){h(I)}finally{delete m[b.id],M()}}),o(`[${i}]: Add ${v.id} to JobQueue`),o(`[${i}]: JobQueue length=${R.length}`),M()});return{addWorker:g=>(d[g.id]=g,o(`[${i}]: Add ${g.id}`),o(`[${i}]: Number of workers=${D()}`),M(),g.id),addJob:async(g,...y)=>{if(D()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return E(g,y)},terminate:async()=>{Object.keys(d).forEach(async g=>{await d[g].terminate()}),R=[]},getQueueLen:N,getNumWorkers:D}},oe}function er(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ae,_e;function rr(){return _e||(_e=1,ae=s=>{const o={};return typeof WorkerGlobalScope<"u"?o.type="webworker":typeof document=="object"?o.type="browser":typeof process=="object"&&typeof er=="function"&&(o.type="node"),typeof s>"u"?o:o[s]}),ae}var ie,Ne;function tr(){if(Ne)return ie;Ne=1;const o=rr()("type")==="browser"?n=>new URL(n,window.location.href).href:n=>n;return ie=n=>{const l={...n};return["corePath","workerPath","langPath"].forEach(i=>{n[i]&&(l[i]=o(l[i]))}),l},ie}var se,qe;function He(){return qe||(qe=1,se={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),se}const nr="6.0.1",or={version:nr};var ue,Pe;function ar(){return Pe||(Pe=1,ue={workerBlobURL:!0,logger:()=>{}}),ue}var ce,Ce;function ir(){if(Ce)return ce;Ce=1;const s=or.version;return ce={...ar(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${s}/dist/worker.min.js`},ce}var le,Me;function sr(){return Me||(Me=1,le=({workerPath:s,workerBlobURL:o})=>{let n;if(Blob&&URL&&o){const l=new Blob([`importScripts("${s}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(l))}else n=new Worker(s);return n}),le}var fe,je;function ur(){return je||(je=1,fe=s=>{s.terminate()}),fe}var de,Ge;function cr(){return Ge||(Ge=1,de=(s,o)=>{s.onmessage=({data:n})=>{o(n)}}),de}var he,De;function lr(){return De||(De=1,he=async(s,o)=>{s.postMessage(o)}),he}var pe,Ue;function fr(){if(Ue)return pe;Ue=1;const s=n=>new Promise((l,i)=>{const d=new FileReader;d.onload=()=>{l(d.result)},d.onerror=({target:{error:{code:m}}})=>{i(Error(`File could not be read! Code=${m}`))},d.readAsArrayBuffer(n)}),o=async n=>{let l=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?l=atob(n.split(",")[1]).split("").map(i=>i.charCodeAt(0)):l=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(l=await o(n.src)),n.tagName==="VIDEO"&&(l=await o(n.poster)),n.tagName==="CANVAS"&&await new Promise(i=>{n.toBlob(async d=>{l=await s(d),i()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const i=await n.convertToBlob();l=await s(i)}else(n instanceof File||n instanceof Blob)&&(l=await s(n));return new Uint8Array(l)};return pe=o,pe}var ge,$e;function dr(){if($e)return ge;$e=1;const s=ir(),o=sr(),n=ur(),l=cr(),i=lr(),d=fr();return ge={defaultOptions:s,spawnWorker:o,terminateWorker:n,onMessage:l,send:i,loadImage:d},ge}var ve,Fe;function Je(){if(Fe)return ve;Fe=1;const s=tr(),o=Ke(),{log:n}=Ee(),l=Se(),i=He(),{defaultOptions:d,spawnWorker:m,terminateWorker:R,onMessage:N,loadImage:D,send:M}=dr();let E=0;return ve=async(j="eng",S=i.LSTM_ONLY,L={},g={})=>{const y=l("Worker",E),{logger:A,errorHandler:h,...v}=s({...d,...L}),b={},I=typeof j=="string"?j.split("+"):j;let W=S,z=g;const B=[i.DEFAULT,i.LSTM_ONLY].includes(S)&&!v.legacyCore;let U,H;const Y=new Promise((c,f)=>{H=c,U=f}),X=c=>{U(c.message)};let $=m(v);$.onerror=X,E+=1;const q=({id:c,action:f,payload:w})=>new Promise((P,C)=>{n(`[${y}]: Start ${c}, action=${f}`);const F=`${f}-${c}`;b[F]={resolve:P,reject:C},M($,{workerId:y,jobId:c,action:f,payload:w})}),J=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),x=c=>q(o({id:c,action:"load",payload:{options:{lstmOnly:B,corePath:v.corePath,logging:v.logging}}})),V=(c,f,w)=>q(o({id:w,action:"FS",payload:{method:"writeFile",args:[c,f]}})),Q=(c,f)=>q(o({id:f,action:"FS",payload:{method:"readFile",args:[c,{encoding:"utf8"}]}})),r=(c,f)=>q(o({id:f,action:"FS",payload:{method:"unlink",args:[c]}})),e=(c,f,w)=>q(o({id:w,action:"FS",payload:{method:c,args:f}})),t=(c,f)=>q(o({id:f,action:"loadLanguage",payload:{langs:c,options:{langPath:v.langPath,dataPath:v.dataPath,cachePath:v.cachePath,cacheMethod:v.cacheMethod,gzip:v.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(W)&&!v.legacyLang}}})),u=(c,f,w,P)=>q(o({id:P,action:"initialize",payload:{langs:c,oem:f,config:w}})),a=(c="eng",f,w,P)=>{if(B&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(f))throw Error("Legacy model requested but code missing.");const C=f||W;W=C;const F=w||z;z=F;const ee=(typeof c=="string"?c.split("+"):c).filter(xe=>!I.includes(xe));return I.push(...ee),ee.length>0?t(ee,P).then(()=>u(c,C,F,P)):u(c,C,F,P)},p=(c={},f)=>q(o({id:f,action:"setParameters",payload:{params:c}})),O=async(c,f={},w={text:!0},P)=>q(o({id:P,action:"recognize",payload:{image:await D(c),options:f,output:w}})),k=async(c,f)=>{if(B)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return q(o({id:f,action:"detect",payload:{image:await D(c)}}))},_=async()=>($!==null&&(R($),$=null),Promise.resolve());N($,({workerId:c,jobId:f,status:w,action:P,data:C})=>{const F=`${P}-${f}`;if(w==="resolve")n(`[${c}]: Complete ${f}`),b[F].resolve({jobId:f,data:C}),delete b[F];else if(w==="reject")if(b[F].reject(C),delete b[F],P==="load"&&U(C),h)h(C);else throw Error(C);else w==="progress"&&A({...C,userJobId:f})});const T={id:y,worker:$,load:J,writeText:V,readText:Q,removeFile:r,FS:e,reinitialize:a,setParameters:p,recognize:O,detect:k,terminate:_};return x().then(()=>t(j)).then(()=>u(j,S,g)).then(()=>H(T)).catch(()=>{}),Y},ve}var me,We;function hr(){if(We)return me;We=1;const s=Je();return me={recognize:async(l,i,d)=>{const m=await s(i,1,d);return m.recognize(l).finally(async()=>{await m.terminate()})},detect:async(l,i)=>{const d=await s("osd",0,i);return d.detect(l).finally(async()=>{await d.terminate()})}},me}var ye,Be;function pr(){return Be||(Be=1,ye={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ye}var we,ze;function gr(){return ze||(ze=1,we={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),we}var Le,Ye;function vr(){if(Ye)return Le;Ye=1,Qe();const s=Xe(),o=Je(),n=hr(),l=pr(),i=He(),d=gr(),{setLogging:m}=Ee();return Le={languages:l,OEM:i,PSM:d,createScheduler:s,createWorker:o,setLogging:m,...n},Le}var mr=vr();const yr=Ze(mr),Rr=({label:s,name:o,onChange:n,maxFiles:l=1,isForGcash:i=!1,minimumAmount:d=0})=>{const[m,R]=be.useState(!1),[N,D]=be.useState([]),M=S=>{if(!S.toLowerCase().includes("gcash"))throw new Error("GCash not found in receipt ❌");const L=/(?:Amount|Total Amount sent)[^\d]*([\d,]+\.\d{2})/i,g=S.match(L);if(!g)throw new Error("Amount not found in receipt ❌");const y=parseFloat(g[1].replace(/,/g,""));if(Number(y)<d)throw new Error(`The receipt amount is less than the minimum amount of ${d} ❌`);return{amount:y}},E=S=>new Promise((L,g)=>{const y=new FileReader;y.onload=async()=>{try{const A=y.result,h=await yr.recognize(A,"eng"),{amount:v}=M(h.data.text);L(v)}catch(A){g(A)}},y.onerror=()=>g(new Error("Failed to read file")),y.readAsDataURL(S)}),j=async S=>{var A;const L=(A=S.target.files)==null?void 0:A[0];if(!L)return;if(!L.type.startsWith("image/")){K.error("Only image files are allowed.");return}const g=2*1024*1024;if(L.size>g){K.error("Image size must be less than or equal to 2MB.");return}if(N.length>=l){K.error(`You can only upload up to ${l} images.`);return}if(N.some(h=>h.name===L.name&&h.size===L.size)){K.error("You are uploading the same file.");return}try{R(!0);const h=new FormData;if(h.append("file",L),i){const W=await E(L);console.log("Valid GCash amount:",W)}const v=await Ve.post("/filepond",h,{headers:{"Content-Type":"multipart/form-data"}});if(v.status!==201)throw new Error("Failed to upload file");K.success(v.data.message);const b=[...N,L];D(b);const I={target:{name:o,value:v.data.data.name}};n==null||n(I)}catch(h){console.error(h);const v=(h==null?void 0:h.message)||String(h)||"An error occurred while uploading the file.";K.error(v)}finally{R(!1),S.target.value=""}};return G.jsx(G.Fragment,{children:G.jsxs("label",{htmlFor:o,className:"cursor-pointer",children:[G.jsx("p",{className:"mb-2",children:s}),G.jsx("input",{type:"file",name:o,id:o,className:"hidden",onChange:j}),G.jsxs("div",{className:"flex flex-wrap gap-2 relative",children:[N.map((S,L)=>G.jsx("div",{className:"overflow-hidden border aspect-square w-[4.6875rem] border-gray-300 rounded-xl flex items-center justify-center",children:G.jsx("img",{src:URL.createObjectURL(S),alt:""})},L)),G.jsx("div",{className:"border aspect-square w-[4.6875rem] border-gray-300 rounded-xl flex items-center justify-center",children:m?G.jsx(Re,{name:"LoaderCircle",size:30,color:"gray",className:"animate-spin"}):G.jsx(Re,{name:"ImageUp",size:30,color:"gray"})})]})]})})};export{Rr as F};
